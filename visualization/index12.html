<!DOCTYPE html>
<html>
    <head>
        <title>Untitled Document</title>
        <meta charset="UTF-8">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <script src="d3.min.js"></script>

    </head>
    <body>
        <svg width="500" height="500"></svg>

        <script>

            d3.csv('athletes_sochi.csv',function(pippo){

                console.log(pippo)

                //create other database from a previous database
                var newdb = d3.nest()
                .key(function(d){
                    return d.country;
                })
                .entries(pippo)

                console.log(newdb)


                var byAge = d3.nest()
                .key(function(d){
                    return d.age;
                })
                //define a operation to set a new variable in the new dataset
                .rollup(function(d){
                    return {
                        allAgeSummed: d3.sum(d, function(c){ return c.age; })
                    }
                })
                .entries(pippo)

                console.log(byAge)
            });

        </script>

    </body>
</html>
